
@{
    ViewData["Title"] = "Calendar";
}

<h2>Calendar</h2>

<hr />

<div id="calendar">

</div>


<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.print.css" rel="stylesheet" />
<link href="~/css/calendar.css" rel="stylesheet" />

@section Scripts {

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.js"></script>

    <script>
        $(document).ready(function () {
            var events = [];
            $.ajax({
                type: "GET",
                url: "/Calendar/GetEvents",
                success: function (data) {

                    GenerateCalendar(data)
                },
                error: function (error) {
                    alert('failed');
                }
            })
            })

            function GenerateCalendar(events) {
                console.log("ready!");
                console.log(events)

            $('#calender').fullCalendar('destroy');
            $('#calendar').fullCalendar({
                defaultView: 'month',

                header: {
                    left: 'title',
                    center: '',
                    right: 'prev,next'
                },
                weekNumbers: true,
                editable: true,
                droppable: true,
                eventLimit: true,
                eventColor: 'red',
                events: events

            });

            $('#my-prev-button').click(function () {
                $('#calendar').fullCalendar('prev');
            });
        }
    </script>

}